<app-header></app-header>
<section class="section-login py-[50px] max-[1199px]:py-[35px]">
  <div
    class="flex flex-wrap justify-between relative items-center mx-auto min-[1400px]:max-w-[1320px] min-[1200px]:max-w-[1140px] min-[992px]:max-w-[960px] min-[768px]:max-w-[720px] min-[576px]:max-w-[540px]"
  >
    <div class="flex flex-wrap w-full">
      <div class="w-full px-[12px]">
        <div
          class="section-title mb-[20px] pb-[20px] relative flex flex-col items-center text-center max-[991px]:pb-[0]"
        >
          <div class="section-detail max-[991px]:mb-[12px]">
            <h2
              class="bb-title font-quicksand mb-[0] p-[0] text-[25px] font-bold text-[#3d4750] relative inline capitalize leading-[1] tracking-[0.03rem] max-[767px]:text-[23px]"
            >
              Connexion
            </h2>
            @if (loginError) {
            <p
              class="font-Poppins max-w-[400px] mt-[10px] text-[14px] text-[#686e7d] leading-[18px] font-light tracking-[0.03rem] max-[991px]:mx-[auto] text-red"
            >
              {{ loginError }}
            </p>
            }
          </div>
        </div>
      </div>
      <div class="w-full px-[12px]">
        <div
          class="bb-login-contact max-w-[500px] m-[auto] border-[1px] border-solid border-[#eee] p-[30px] rounded-[20px]"
        >
          <form [formGroup]="loginForm" (ngSubmit)="login()">
            <div class="bb-login-wrap mb-[24px]">
              <label
                for="email"
                class="inline-block font-Poppins text-[15px] font-normal text-[#686e7d] leading-[26px] tracking-[0.02rem]"
                >Email*</label
              >
              <input
                type="email"
                formControlName="username"
                required
                id="email"
                name="email"
                placeholder="Entrer votre email"
                class="w-full p-[10px] text-[14px] font-normal text-[#686e7d] border-[1px] border-solid border-[#eee] outline-[0] leading-[26px] rounded-[10px]"
              />
              <div
                *ngIf="
                  loginForm.get('username')?.touched &&
                  loginForm.get('username')?.invalid
                "
                class="text-red-500 text-sm mt-1"
              >
                <div *ngIf="loginForm.get('username')?.errors?.['required']">
                  <span class="error-message">L'email est obligatoire.</span>
                </div>
                <div *ngIf="loginForm.get('username')?.errors?.['email']">
                  Veuillez entrer un email valide.
                </div>
              </div>
            </div>
            <div class="bb-login-wrap mb-[24px]">
              <label
                for="password"
                class="inline-block font-Poppins text-[15px] font-normal text-[#686e7d] leading-[26px] tracking-[0.02rem]"
                >Mot de passe*</label
              >
              <div class="relative">
                <input
                  [type]="showPassword ? 'text' : 'password'"
                  formControlName="password"
                  required
                  id="password"
                  name="password"
                  placeholder="Entrer votre mot de passe"
                  class="w-full p-[10px] text-[14px] font-normal text-[#686e7d] border-[1px] border-solid border-[#eee] outline-[0] leading-[26px] rounded-[10px]"
                />

                <button
                  type="button"
                  (click)="togglePasswordVisibility()"
                  class="absolute right-[10px] top-1/2 transform -translate-y-1/2 bg-transparent border-none cursor-pointer mt-[10px]"
                >
                  <i
                    class="fas"
                    [ngClass]="{
                      'fa-eye': showPassword,
                      'fa-eye-slash': !showPassword
                    }"
                  ></i>
                </button>
              </div>
              <div
                *ngIf="
                  loginForm.get('password')?.touched &&
                  loginForm.get('password')?.invalid
                "
                class="text-red-500 text-sm mt-1"
              >
                <div *ngIf="loginForm.get('password')?.errors?.['required']">
                  <span class="error-message"
                    >Le mot de passe est obligatoire.</span
                  >
                </div>
                <div *ngIf="loginForm.get('password')?.errors?.['minlength']">
                  <span class="error-message"
                    >Le mot de passe doit contenir au moins 6 caractères.</span
                  >
                </div>
              </div>
            </div>
            <div class="bb-login-wrap mb-[24px]">
              <a
                href="javascript:void(0)"
                class="font-Poppins leading-[28px] tracking-[0.03rem] text-[14px] font-medium text-[#777]"
                >Mot de passe oublié ?
              </a>
            </div>
            <div class="bb-login-button m-[-5px] flex justify-between">
              <button
                class="bb-btn-2 transition-all duration-[0.3s] ease-in-out font-Poppins leading-[28px] tracking-[0.03rem] m-[5px] py-[4px] px-[20px] text-[14px] font-normal text-[#fff] bg-[#6c7fd8] rounded-[10px] border-[1px] border-solid border-[#6c7fd8] hover:bg-transparent hover:border-[#3d4750] hover:text-[#3d4750] cursor-pointer"
                type="submit"
                [disabled]="loginForm.invalid || isLoading"
              >
                {{ isLoading ? "Connexion..." : "Se connecter" }}
              </button>
              <a
                routerLink="/signup"
                class="h-[36px] m-[5px] flex items-center font-Poppins text-[15px] text-[#686e7d] font-light leading-[28px] tracking-[0.03rem]"
                 routerLink="/auth/signup">S'inscrire</a
              >
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>
</section>
